<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Configuration" href="config.html" /><link rel="prev" title="Fish Diffusion" href="../index.html" />

    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/fishaudio/fish-diffusion@main/images/logo_512x512.png"/><!-- Generated with Sphinx 5.3.0 and Furo 2023.03.27 -->
        <title>Quick FishSVC Guide - Fish Diffusion documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/fontawesome.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/brands.min.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<div class="announcement">
  <aside class="announcement-content">
     Wiki is under construction, we welcome any contribution! 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Fish Diffusion  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="https://cdn.jsdelivr.net/gh/fishaudio/fish-diffusion@main/images/logo_512x512.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Fish Diffusion  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Quick FishSVC Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quality.html">Enhancing Generation Quality</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/fishaudio/fish-diffusion/edit/main/docs/pages/guide.md" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="quick-fishsvc-guide">
<h1>Quick FishSVC Guide<a class="headerlink" href="#quick-fishsvc-guide" title="Permalink to this heading">#</a></h1>
<blockquote>
<div><p>Updated: March 03 2023 (Lengyue)<br />
Made &amp; Updated: Kangarroar (Feb 01 2023)
Updated: May 17 2023 (OOPPEENN)</p>
</div></blockquote>
<p>If you don’t want to install the environment manually or don’t have a powerful GPU, using <a class="reference external" href="https://colab.research.google.com/github/fishaudio/fish-diffusion/blob/main/notebooks/train.ipynb">Google Colab</a> for training is a good option to get started</p>
<section id="preparing-the-environment">
<h2>Preparing the environment<a class="headerlink" href="#preparing-the-environment" title="Permalink to this heading">#</a></h2>
<ol class="arabic">
<li><p>You need to install conda on your PC, I recommend installing Miniconda if you don’t want it to eat a lot of your disk space.</p>
<p>The link for Miniconda is here: <a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html">https://docs.conda.io/en/latest/miniconda.html</a></p>
<p>For Chinese users, you may need to get miniconda through the mirror source, and change the miniconda source according to the guide of the mirror station.</p>
<p>The link for Miniconda is here: <a class="reference external" href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/</a><br />
The link for guide is here: <a class="reference external" href="https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/">https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/</a></p>
</li>
<li><p>After installing Miniconda, open “Anaconda”, then you will need to type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">--</span><span class="n">name</span> <span class="n">Fish</span> <span class="n">python</span><span class="o">=</span><span class="mf">3.10</span>
</pre></div>
</div>
<p>Once you have done that, a environment called Fish will be created, to access it you need to type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">Fish</span>
</pre></div>
</div>
</li>
<li><p>Make sure that the next steps are in the virtual environment of Fish</p>
<p>Install pdm to manage project dependencies</p>
<p>Windows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">sSL</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">pdm</span><span class="o">-</span><span class="n">project</span><span class="o">/</span><span class="n">pdm</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">install</span><span class="o">-</span><span class="n">pdm</span><span class="o">.</span><span class="n">py</span> <span class="o">|</span> <span class="n">python3</span> <span class="o">-</span>
</pre></div>
</div>
<p>Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">sSL</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">pdm</span><span class="o">-</span><span class="n">project</span><span class="o">/</span><span class="n">pdm</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">install</span><span class="o">-</span><span class="n">pdm</span><span class="o">.</span><span class="n">py</span> <span class="o">|</span> <span class="n">python3</span> <span class="o">-</span>
</pre></div>
</div>
<p>For Chinese users, you may need to get pdm through the mirror source, and change the pdm source according to the guide of the mirror station.<br />
The link for guide is here: <a class="reference external" href="https://mirrors.tuna.tsinghua.edu.cn/help/pypi/">https://mirrors.tuna.tsinghua.edu.cn/help/pypi/</a></p>
</li>
<li><p>Once you have finished the base to set up the environment, proceed to download FishSVC from the <a class="reference external" href="https://github.com/fishaudio/fish-diffusion">GitHub</a>. You can either</p></li>
</ol>
<ul>
<li><p>Click code and then “Download as zip”, then you decompress the folder wherever you want.</p></li>
<li><p>Or you can clone the repository with the command <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/fishaudio/fish-diffusion</span></code> if you have git installed.</p>
<p>In your conda environment, point to the folder where you have all the files for fish, just click on the file explorer bar and copy the full path, on conda run the command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">NAME</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">fish</span><span class="o">-</span><span class="n">difussion</span> <span class="p">(</span><span class="n">example</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<ol class="arabic" start="5">
<li><p>Run this command to update the dependencies and install the project</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdm</span> <span class="n">sync</span>
</pre></div>
</div>
</li>
<li><p>Fish Diffusion requires the <a class="reference external" href="https://github.com/fishaudio/fish-diffusion/releases/tag/v2.0.0">FishAudio NSF-HiFiGAN</a> vocoder to generate audio, there is an automatic download for it, just run the command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">tools</span><span class="o">/</span><span class="n">download_nsf_hifigan</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>It will start downloading the vocoder automatically and will put it on the checkpoints folder, wait until it’s done or you can do a manual download for it. <a class="reference external" href="https://github.com/openvpi/vocoders/releases/tag/nsf-hifigan-v1">Hifigan Link</a></p>
</li>
<li><p>FishSVC is installed!</p></li>
</ol>
</section>
<section id="dataset-preparation-single-speaker">
<h2>Dataset Preparation (Single Speaker)<a class="headerlink" href="#dataset-preparation-single-speaker" title="Permalink to this heading">#</a></h2>
<p>You need to put the dataset into the dataset directory in the following file structure</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>dataset
├───train
│<span class="w">   </span>├───xxx1-xxx1.wav
│<span class="w">   </span>├───...
│<span class="w">   </span>├───Lxx-0xx8.wav
└───valid
<span class="w">    </span>├───xx2-0xxx2.wav
<span class="w">    </span>├───...
<span class="w">    </span>└───xxx7-xxx007.wav
</pre></div>
</div>
<blockquote>
<div><p>You should only put few wav files on the valid folder (like 10-20), it’s only used to check the audio quality.</p>
</div></blockquote>
<p><em>I STRONGLY RECOMMEND FOR LOCAL TRAINING, THAT THE WAVS AREN’T HIGHER THAN 10 SECONDS LONG IF YOU HAVE 4GB OF VRAM</em></p>
<p>To start the preprocessing you need to run the following command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Process the training data (with augmentation if included in the config)</span>
python<span class="w"> </span>tools/preprocessing/extract_features.py<span class="w"> </span>--config<span class="w"> </span>configs/svc_content_vec.py<span class="w"> </span>--path<span class="w"> </span>dataset/train<span class="w"> </span>--clean

<span class="c1"># Process the validation data without augmentation</span>
python<span class="w"> </span>tools/preprocessing/extract_features.py<span class="w"> </span>--config<span class="w"> </span>configs/svc_content_vec.py<span class="w"> </span>--path<span class="w"> </span>dataset/valid<span class="w"> </span>--clean<span class="w"> </span>--no-augmentation
</pre></div>
</div>
<p>Once that is done you have your data prepared to start training!</p>
<blockquote>
<div><p>It’s recommended to copy the config file to a new one, so you don’t mess up the original one.</p>
</div></blockquote>
</section>
<section id="dataset-preparation-multi-speaker">
<h2>Dataset Preparation (Multi Speaker)<a class="headerlink" href="#dataset-preparation-multi-speaker" title="Permalink to this heading">#</a></h2>
<p>Reference to <a class="reference external" href="https://fishaudio.github.io/fish-diffusion/pages/config.html#dataset">Dataset Configuration</a>.</p>
</section>
<section id="training-time">
<h2>Training time!<a class="headerlink" href="#training-time" title="Permalink to this heading">#</a></h2>
<p>You may need to change your batchsize accordingly to your GPU resources, which can be found in <code class="docutils literal notranslate"><span class="pre">configs/_base_/datasets/naive_svc.py</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dataloader</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">train</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">batch_size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
        <span class="n">shuffle</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">num_workers</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">persistent_workers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">valid</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">batch_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">shuffle</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">num_workers</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">persistent_workers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The value you can change is batch size, and num_workers</p>
<p>In my case I have a CPU with 6 cores and a GTX 1650 with 4GB VRAM, I set my number of workers to my number of cores, and my batch size is set to 12, it may vary for you if you have a better GPU, but a GTX 1650 is the baseline to be able to train.</p>
<p>If you get CUDA out of memory try lowering the batch size.
You may want to change every how many steps you want to save the ckpt! By default it saves the checkpoints every 10,000 steps, the config file for it is in:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>configs/_base_/trainers/base.py
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="n">log_every_n_steps</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">val_check_interval</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span>
    <span class="n">check_val_every_n_epoch</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_steps</span><span class="o">=</span><span class="mi">300000</span><span class="p">,</span>
    <span class="c1"># Warning: If you are training the model with fs2 (and see nan), you should either use bf16 or fp32</span>
    <span class="n">precision</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span>
    <span class="n">callbacks</span><span class="o">=</span><span class="p">[</span>
        <span class="n">ModelCheckpoint</span><span class="p">(</span>
            <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{epoch}</span><span class="s2">-</span><span class="si">{step}</span><span class="s2">-</span><span class="si">{valid_loss:.2f}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">every_n_train_steps</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span>
            <span class="n">save_top_k</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">LearningRateMonitor</span><span class="p">(</span><span class="n">logging_interval</span><span class="o">=</span><span class="s2">&quot;step&quot;</span><span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The line you want to change is the line 20, “every_n_train_steps=10000”, change the number to just “1000” if you want to save every 1,000 steps (it will also takes more space on your hard drive).</p>
<p>To start training, you need to run the following command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python tools/diffusion/train.py --config configs/svc_content_vec.py
</pre></div>
</div>
<p>It will ask for a wandb account to look at your graphs and audios, it works similar to tensorboard, just follow the steps the terminal will show to you if you want to use W&amp;B or not</p>
<p>Training should start after setting that up!</p>
</section>
<hr class="docutils" />
<section id="inference">
<h2>Inference<a class="headerlink" href="#inference" title="Permalink to this heading">#</a></h2>
<p>Inferencing with FishSVC is fully terminal code right now, in my case I have a folder called audios where I drop the wav to inference, the command to run inference is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>tools/diffusion/inference.py<span class="w"> </span>--config<span class="w"> </span>configs/svc_content_vec.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--checkpoint<span class="w"> </span><span class="o">[</span>checkpoint<span class="w"> </span>file<span class="o">]</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--input<span class="w"> </span><span class="o">[</span>input<span class="w"> </span>audio<span class="o">]</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output<span class="w"> </span><span class="o">[</span>output<span class="w"> </span>audio<span class="o">]</span>
</pre></div>
</div>
<p>If you want to change the key, after everything add: –pitch_adjust 0 (Change 0 to your liking, like DiffSVC, 6 means 6 notes higher, -6 means 6 notes lower.</p>
<p>Your checkpoints will be in the folder logs. In output audio you need to put the name you want your rendered file to be, including .wav at the end</p>
<p>In my case, the command I run is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>tools/diffusion/inference.py<span class="w"> </span>–-config<span class="w"> </span>configs/svc_hubert_soft.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>–-checkpoint<span class="w"> </span>logs/8liv3s/epoches….<span class="o">=</span><span class="m">0</span>.2.ckpt<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>–-input<span class="w"> </span>audios/test.wav<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output<span class="w"> </span>audios/render/test.wav
</pre></div>
</div>
<p>It should start rendering and it’s pretty fast actually! So in less than 2 minutes your audio should be rendered.</p>
<p>Done! ^^</p>
<p>If you want to start a web-ui to render your audios, you can use the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>tools/diffusion/inference.py<span class="w"> </span>–-config<span class="w"> </span>configs/svc_hubert_soft.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>–-checkpoint<span class="w"> </span>logs/8liv3s/epoches….<span class="o">=</span><span class="m">0</span>.2.ckpt<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--gradio
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="diff-svc-conversion-to-fish-svc">
<h2>DIFF SVC CONVERSION TO FISH SVC<a class="headerlink" href="#diff-svc-conversion-to-fish-svc" title="Permalink to this heading">#</a></h2>
<p>This is pretty straightforward, conversion takes 2 minutes to run and it allows inference immediately!
You first need to copy your DiffSVC checkpoint of the model you want to convert, in my case I created a specific folder called “conversion”</p>
<p>To run the conversion you need to use the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>tools/diffusion/diff_svc_converter.py<span class="w"> </span>--config<span class="w"> </span>configs/svc_hubert_soft_diff_svc.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--input-path<span class="w"> </span><span class="o">[</span>DiffSVC<span class="w"> </span>ckpt<span class="o">]</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output-path<span class="w"> </span><span class="o">[</span>Fish<span class="w"> </span>Diffusion<span class="w"> </span>ckpt<span class="o">]</span>
</pre></div>
</div>
<p>In my case, the command I will run it’s:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>tools/diffusion/diff_svc_converter.py<span class="w"> </span>–-config<span class="w"> </span>configs/svc_hubert_soft_diff_svc.py<span class="w"> </span>–-input-path<span class="w"> </span>conversion/model_train_400000.ckpt<span class="w"> </span>-–output-path<span class="w"> </span>checkpoints/NAME.ckpt
</pre></div>
</div>
<p>It will start running the conversion, if you run into a PyTorch error of size mismatch, you may need to change residual channels on your svc_hubert_soft_diff_svc.py</p>
</section>
<hr class="docutils" />
<section id="inferencing-with-a-diffsvc-converted-model">
<h2>Inferencing with a DiffSVC converted model<a class="headerlink" href="#inferencing-with-a-diffsvc-converted-model" title="Permalink to this heading">#</a></h2>
<p>It’s the same as a normal FishSVC model, just that instead you will need to use: svc_hybert_soft_diff_svc.py config, instead of the normal one.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>tools/diffusion/inference.py<span class="w"> </span>--config<span class="w"> </span>configs/svc_hubert_soft_diff_svc.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--checkpoint<span class="w"> </span><span class="o">[</span>checkpoint<span class="w"> </span>path<span class="o">]</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--input<span class="w"> </span><span class="o">[</span>input<span class="w"> </span>audio<span class="o">]</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--output<span class="w"> </span><span class="o">[</span>output<span class="w"> </span>audio<span class="o">]</span>
</pre></div>
</div>
<p>In my case the command I will run it’s:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>tools/diffusion/inference.py<span class="w"> </span>–-config<span class="w"> </span>configs/svc_hubert_soft_diff_svc.py<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>–-checkpoint<span class="w"> </span>checkpoint/NAME.ckpt<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>–-input<span class="w"> </span>audios/test.wav<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>–-output<span class="w"> </span>audios/render/test.wav
</pre></div>
</div>
<p>And done! You are inferencing with FishSVC from a DiffSVC ckpt!</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="config.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Configuration</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Fish Audio Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link fa-brands fa-github fa-2x" href="https://github.com/fishaudio/fish-diffusion/" aria-label="GitHub"></a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Quick FishSVC Guide</a><ul>
<li><a class="reference internal" href="#preparing-the-environment">Preparing the environment</a></li>
<li><a class="reference internal" href="#dataset-preparation-single-speaker">Dataset Preparation (Single Speaker)</a></li>
<li><a class="reference internal" href="#dataset-preparation-multi-speaker">Dataset Preparation (Multi Speaker)</a></li>
<li><a class="reference internal" href="#training-time">Training time!</a></li>
<li><a class="reference internal" href="#inference">Inference</a></li>
<li><a class="reference internal" href="#diff-svc-conversion-to-fish-svc">DIFF SVC CONVERSION TO FISH SVC</a></li>
<li><a class="reference internal" href="#inferencing-with-a-diffsvc-converted-model">Inferencing with a DiffSVC converted model</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    </body>
</html>